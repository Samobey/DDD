<div class="signal-forms-container">
  <div class="header">
    <h1>üìù Signal Forms Demo</h1>
    <p class="subtitle">Angular v21 Signal Forms with Two-Way Binding</p>
  </div>

  @if (submitSuccess()) {
    <div class="success-message">
      <div class="success-icon">‚úì</div>
      <h2>Success!</h2>
      <p>Your message has been submitted successfully.</p>
    </div>
  } @else {
    <div class="form-wrapper">
      <form (ngSubmit)="onSubmit()" class="form">
        <div class="form-group">
          <label for="name">Full Name</label>
          <input
            id="name"
            type="text"
            [field]="contactForm.name"
            placeholder="Enter your full name"
            class="form-control"
            [class.is-invalid]="submitted() && contactModel().name.length < 2"
          />
          @if (submitted() && contactModel().name.length < 2) {
            <div class="error-message">
              @if (contactModel().name.length === 0) {
                <span>Name is required</span>
              } @else {
                <span>Name must be at least 2 characters</span>
              }
            </div>
          }
        </div>

        <div class="form-group">
          <label for="email">Email Address</label>
          <input
            id="email"
            type="email"
            [field]="contactForm.email"
            placeholder="your@email.com"
            class="form-control"
            [class.is-invalid]="submitted() && !contactModel().email.includes('@')"
          />
          @if (submitted() && !contactModel().email.includes('@')) {
            <div class="error-message">
              @if (contactModel().email.length === 0) {
                <span>Email is required</span>
              } @else {
                <span>Please enter a valid email address</span>
              }
            </div>
          }
        </div>

        <div class="form-group">
          <label for="message">Message</label>
          <textarea
            id="message"
            [field]="contactForm.message"
            placeholder="Enter your message (min. 10 characters)..."
            class="form-control textarea"
            rows="5"
            [class.is-invalid]="submitted() && contactModel().message.length < 10"
          ></textarea>
          @if (submitted() && contactModel().message.length < 10) {
            <div class="error-message">
              @if (contactModel().message.length === 0) {
                <span>Message is required</span>
              } @else {
                <span>Message must be at least 10 characters</span>
              }
            </div>
          }
        </div>

        <div class="form-group checkbox">
          <label for="subscribe">
            <input
              id="subscribe"
              type="checkbox"
              [field]="contactForm.subscribe"
              class="checkbox-control"
            />
            <span>Subscribe to our newsletter</span>
          </label>
        </div>

        <div class="form-actions">
          <button type="submit" class="btn btn-primary" [disabled]="submitted() && !formValid()">
            {{ submitted() ? 'Submitting...' : 'Submit' }}
          </button>
          <button type="button" class="btn btn-secondary" (click)="reset()">
            Reset
          </button>
        </div>
      </form>

      <div class="form-status">
        <div class="status-item">
          <span class="label">Form Valid:</span>
          <span class="badge" [class.valid]="formValid()" [class.invalid]="!formValid()">
            {{ formValid() ? '‚úì Valid' : '‚úó Invalid' }}
          </span>
        </div>
        <div class="status-item">
          <span class="label">Model State:</span>
          <span class="badge">Name: {{ contactModel().name.length }}ch</span>
        </div>
        <div class="status-item">
          <span class="label">Email:</span>
          <span class="badge" [class.yes]="contactModel().email.includes('@')">
            {{ contactModel().email.includes('@') ? 'Valid' : 'Invalid' }}
          </span>
        </div>
      </div>
    </div>
  }

  <div class="info-box">
    <h3>What are Signal Forms?</h3>
    <p>
      Signal Forms in Angular v21 use the new Signal Forms API with writable signals as the foundation. 
      The <code>form()</code> function creates a reactive field tree that synchronizes automatically 
      with the model signal using the <code>[field]</code> directive.
    </p>
    <div class="features">
      <div class="feature">
        <h4>‚ö° Signals Foundation</h4>
        <p>Form models are writable signals that track all form data</p>
      </div>
      <div class="feature">
        <h4>üîÑ Two-Way Binding</h4>
        <p>The [field] directive creates automatic synchronization</p>
      </div>
      <div class="feature">
        <h4>üéØ Fine-Grained Reactivity</h4>
        <p>Only affected components re-render on changes</p>
      </div>
      <div class="feature">
        <h4>‚ú® Type-Safe</h4>
        <p>Full TypeScript support with proper field typing</p>
      </div>
    </div>
  </div>
</div>
